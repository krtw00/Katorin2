# Katorin2 開発 Issue 一覧

作成日: 2026-01-18

## サマリー

| 優先度 | 件数 | 内容 |
|--------|------|------|
| P1 (高) | 8件 | MVP完成に必須 |
| P2 (中) | 10件 | UX改善・機能強化 |
| P3 (低) | 8件 | Phase 2機能 |
| Total | 26件 | |

---

## P1: 高優先度（MVP完成に必須）

### Issue #1: 大会作成時にシリーズを選択できるようにする
**カテゴリ**: 機能追加
**対象**: `src/app/(main)/tournaments/new/`, `src/components/tournament/TournamentForm.tsx`

**現状**: 大会作成フォームにシリーズ選択UIがない
**要件**: 自分が主催するシリーズから選択して大会を紐付け可能にする

**タスク**:
- [ ] TournamentForm にシリーズ選択ドロップダウン追加
- [ ] 選択したシリーズIDをtournamentsテーブルに保存
- [ ] 大会詳細ページでシリーズ情報を表示

**工数目安**: 0.5日

---

### Issue #2: シリーズ終了時の自動ポイント計算機能
**カテゴリ**: 機能追加
**対象**: `src/lib/series/`, `supabase/`

**現状**: series_pointsへの手動入力が必要
**要件**: 大会終了時に自動でポイント計算・登録

**タスク**:
- [ ] ポイント計算ロジック実装（ranking/wins両対応）
- [ ] 大会終了時のトリガーまたはServer Action作成
- [ ] series_pointsへの自動挿入
- [ ] ランキング更新の確認

**工数目安**: 1日

---

### Issue #3: 参加者一覧を独立ページとして作成
**カテゴリ**: 機能追加
**対象**: `src/app/(main)/tournaments/[id]/participants/`

**現状**: 大会詳細ページのタブ内に埋め込み
**要件**: 独立した参加者一覧ページ（URLで直接アクセス可能）

**タスク**:
- [ ] /tournaments/[id]/participants/page.tsx 作成
- [ ] 参加者テーブル表示（シード、チェックイン状態、最終順位）
- [ ] CSV/JSONエクスポート機能（主催者のみ）
- [ ] 検索・フィルター機能

**工数目安**: 0.5日

---

### Issue #4: チェックイン機能の実装
**カテゴリ**: 機能追加
**対象**: `src/app/(main)/tournaments/[id]/`, `src/components/tournament/`

**現状**: DBスキーマのみ存在、UIなし
**要件**: 参加者が大会開始前にチェックインできる

**タスク**:
- [ ] 大会設定でチェックイン有効/無効切り替え
- [ ] チェックイン開始・締切時刻の設定
- [ ] 参加者向けチェックインボタン追加
- [ ] チェックイン状態の表示（参加者一覧）
- [ ] チェックイン締切後の未チェックイン者除外ロジック

**工数目安**: 1.5日

---

### Issue #5: マイページに所属チーム一覧を追加
**カテゴリ**: 機能追加
**対象**: `src/app/(main)/my/teams/`

**現状**: 所属チーム一覧ページが存在しない
**要件**: マイページから所属チームを確認できる

**タスク**:
- [ ] /my/teams/page.tsx 作成
- [ ] 自分がリーダーのチーム
- [ ] メンバーとして所属しているチーム
- [ ] 招待中のチーム表示

**工数目安**: 0.5日

---

### Issue #6: 大会詳細ページの情報表示改善
**カテゴリ**: UI改善
**対象**: `src/app/(main)/tournaments/[id]/page.tsx`

**現状**: 一部情報が表示されていない
**要件**: 画面設計書の通り全情報を表示

**タスク**:
- [ ] 結果報告方式の表示追加
- [ ] チェックイン設定の表示追加
- [ ] カスタム項目設定の表示追加
- [ ] 主催者の過去開催大会数の表示

**工数目安**: 0.5日

---

### Issue #7: 大会一覧ページのフィルター・検索機能
**カテゴリ**: 機能追加
**対象**: `src/app/(main)/tournaments/page.tsx`

**現状**: フィルター・検索機能なし
**要件**: ステータス、形式、参加形式でフィルター可能

**タスク**:
- [ ] キーワード検索（タイトル、説明）
- [ ] ステータスフィルター（募集中/開催中/終了）
- [ ] トーナメント形式フィルター
- [ ] 参加形式フィルター（個人戦/チーム戦）
- [ ] ページネーション

**工数目安**: 1日

---

### Issue #8: シリーズ一覧ページのフィルター・検索機能
**カテゴリ**: 機能追加
**対象**: `src/app/(main)/series/page.tsx`

**現状**: フィルター・検索機能なし
**要件**: ステータス、参加形式でフィルター可能

**タスク**:
- [ ] キーワード検索
- [ ] ステータスフィルター（開催中/終了）
- [ ] 参加形式フィルター
- [ ] ページネーション

**工数目安**: 0.5日

---

## P2: 中優先度（UX改善・機能強化）

### Issue #9: 通知機能のUI実装
**カテゴリ**: 機能追加
**対象**: `src/components/layout/Header.tsx`, `src/app/(main)/notifications/`

**現状**: DBスキーマのみ存在
**要件**: アプリ内通知の表示・管理

**タスク**:
- [ ] ヘッダーに通知アイコン追加
- [ ] 未読件数バッジ表示
- [ ] 通知ドロップダウン（最新5件）
- [ ] 通知一覧ページ作成
- [ ] 通知のリアルタイム受信

**工数目安**: 1.5日

---

### Issue #10: チーム戦大会の作成UI
**カテゴリ**: 機能追加
**対象**: `src/components/tournament/TournamentForm.tsx`

**現状**: 個人戦のみ対応
**要件**: チーム戦大会を作成可能に

**タスク**:
- [ ] 参加形式選択（個人戦/チーム戦）追加
- [ ] チーム戦設定セクション追加
  - チーム戦形式（勝ち抜き/ポイント制）
  - チーム人数（最小〜最大）
  - チーム作成方式
- [ ] バリデーション追加

**工数目安**: 1日

---

### Issue #11: チーム戦エントリーUI
**カテゴリ**: 機能追加
**対象**: `src/app/(main)/tournaments/[id]/entry/`

**現状**: 個人戦エントリーのみ
**要件**: チーム戦大会へのチームエントリー

**タスク**:
- [ ] チーム選択UI（自分がリーダーのチームから）
- [ ] 出場メンバー選択UI（チームメンバーから）
- [ ] 出場順設定UI（勝ち抜き戦時）
- [ ] team_entries, team_rostersへの保存

**工数目安**: 1.5日

---

### Issue #12: チーム戦ブラケット表示
**カテゴリ**: 機能追加
**対象**: `src/components/tournament/RealtimeBracket.tsx`

**現状**: 個人戦のみ対応
**要件**: チーム戦のブラケット表示

**タスク**:
- [ ] チーム名での表示対応
- [ ] チーム対戦の詳細展開（メンバー対戦結果）
- [ ] 勝ち抜き戦: 各個人戦の勝敗表示
- [ ] ポイント制: メンバーごとの勝敗とチーム合計表示

**工数目安**: 2日

---

### Issue #13: チーム戦結果入力UI
**カテゴリ**: 機能追加
**対象**: `src/app/(main)/tournaments/[id]/manage/`

**現状**: 個人戦の結果入力のみ
**要件**: チーム戦の各メンバー戦結果入力

**タスク**:
- [ ] チーム対戦カード表示
- [ ] 各メンバー戦の結果入力フォーム
- [ ] チーム勝敗の自動判定（勝ち数に応じて）
- [ ] individual_matchesへの保存

**工数目安**: 1.5日

---

### Issue #14: パスワードリセット機能
**カテゴリ**: 機能追加
**対象**: `src/app/(auth)/reset-password/`

**現状**: 未実装
**要件**: パスワードを忘れた場合のリセット機能

**タスク**:
- [ ] /reset-password/page.tsx 作成（メール入力）
- [ ] Supabase Auth のリセットメール送信
- [ ] リセットリンクからの新パスワード設定ページ

**工数目安**: 0.5日

---

### Issue #15: プロフィール編集の充実
**カテゴリ**: UI改善
**対象**: `src/app/(main)/my/edit/`

**現状**: 基本的な編集のみ
**要件**: アバター、SNSリンク等の編集

**タスク**:
- [ ] アバター画像アップロード
- [ ] Discord ID入力
- [ ] 自己紹介文（bio）入力
- [ ] Supabase Storageへの画像保存

**工数目安**: 1日

---

### Issue #16: チームアバター画像対応
**カテゴリ**: 機能追加
**対象**: `src/components/team/TeamForm.tsx`

**現状**: アバター未実装
**要件**: チーム画像の設定

**タスク**:
- [ ] 画像アップロードコンポーネント追加
- [ ] Supabase Storageへの保存
- [ ] チーム詳細・一覧での表示

**工数目安**: 0.5日

---

### Issue #17: ローディング・エラー状態の改善
**カテゴリ**: UI改善
**対象**: 全ページ

**現状**: 一部ページでローディング/エラー状態が未定義
**要件**: 全ページで適切な状態表示

**タスク**:
- [ ] 各ページに loading.tsx 追加
- [ ] 各ページに error.tsx 追加
- [ ] Skeleton コンポーネントの活用

**工数目安**: 1日

---

### Issue #18: レスポンシブデザインの改善
**カテゴリ**: UI改善
**対象**: 全ページ

**現状**: 一部ページでモバイル表示が最適化されていない
**要件**: スマートフォンでの快適な操作

**タスク**:
- [ ] トーナメント表のモバイル対応
- [ ] フォームのモバイル最適化
- [ ] ナビゲーションのモバイル対応確認

**工数目安**: 1日

---

## P3: 低優先度（Phase 2機能）

### Issue #19: ダブルエリミネーション対応
**カテゴリ**: 機能追加
**対象**: `src/lib/tournament/bracket.ts`

**現状**: シングルエリミネーションのみ
**要件**: ダブルエリミネーション形式の大会

**タスク**:
- [ ] 勝者側/敗者側ブラケット生成ロジック
- [ ] グランドファイナルのリセット対応
- [ ] UI表示対応

**工数目安**: 3日

---

### Issue #20: スイスドロー対応
**カテゴリ**: 機能追加
**対象**: `src/lib/tournament/bracket.ts`

**現状**: 未実装
**要件**: スイスドロー形式の大会

**タスク**:
- [ ] マッチング（同勝ち点でペアリング）ロジック
- [ ] タイブレーカー計算（オポネントマッチウィン率等）
- [ ] ラウンド進行管理
- [ ] UI表示対応

**工数目安**: 4日

---

### Issue #21: 参加者による結果報告機能
**カテゴリ**: 機能追加
**対象**: `src/app/(main)/tournaments/[id]/report/`

**現状**: 主催者のみ結果入力可能
**要件**: 参加者が結果報告、相手が承認

**タスク**:
- [ ] 結果報告フォーム作成
- [ ] 相手への承認依頼通知
- [ ] 承認/異議申し立てフロー
- [ ] 異議がある場合の主催者介入

**工数目安**: 2日

---

### Issue #22: デッキマスタ管理機能
**カテゴリ**: 機能追加
**対象**: `src/app/(main)/tournaments/[id]/decks/`

**現状**: 未実装
**要件**: 大会で使用するデッキリストを管理

**タスク**:
- [ ] decks, participant_decks, match_decks テーブル作成
- [ ] デッキ一覧管理UI
- [ ] CSVインポート機能
- [ ] 他大会からのコピー機能

**工数目安**: 2日

---

### Issue #23: メタゲーム統計機能
**カテゴリ**: 機能追加
**対象**: `src/app/(main)/tournaments/[id]/stats/`

**現状**: 未実装
**要件**: 大会のデッキ使用率・勝率を分析

**タスク**:
- [ ] デッキ使用率集計
- [ ] デッキ別勝率計算
- [ ] ティア分類（Tier 1/2/3）
- [ ] マッチアップ表（相性マトリクス）
- [ ] グラフ表示（棒/円グラフ）

**工数目安**: 3日

---

### Issue #24: SNS共有画像生成API
**カテゴリ**: 機能追加
**対象**: `src/app/api/og/`

**現状**: 未実装
**要件**: OGP画像の動的生成

**タスク**:
- [ ] @vercel/og または satori の導入
- [ ] 対戦カード画像生成 (/api/og/match/[matchId])
- [ ] 結果カード画像生成 (/api/og/result/[matchId])
- [ ] 大会サマリー画像生成 (/api/og/summary/[tournamentId])
- [ ] ラウンド対戦表画像生成
- [ ] メタゲーム統計画像生成

**工数目安**: 4日

---

### Issue #25: Discord連携
**カテゴリ**: 機能追加
**対象**: `src/app/(auth)/`, Supabase Auth

**現状**: 未実装
**要件**: Discordアカウントでログイン、Webhook通知

**タスク**:
- [ ] Discord OAuth設定
- [ ] ログイン画面にDiscordボタン追加
- [ ] Webhook通知設定UI
- [ ] 大会開始・結果確定時の通知送信

**工数目安**: 2日

---

### Issue #26: チーム戦績詳細ページ
**カテゴリ**: 機能追加
**対象**: `src/app/(main)/teams/[id]/stats/`

**現状**: 未実装
**要件**: チームの戦績・使用デッキ分析

**タスク**:
- [ ] 戦績サマリー表示
- [ ] メンバー別戦績
- [ ] 使用デッキ分布
- [ ] 対戦履歴

**工数目安**: 2日

---

## 実装推奨順序

### フェーズ1（2週間目安）
1. Issue #1: シリーズ選択
2. Issue #3: 参加者一覧ページ
3. Issue #5: 所属チーム一覧
4. Issue #6: 大会詳細改善
5. Issue #7: 大会一覧フィルター
6. Issue #8: シリーズ一覧フィルター
7. Issue #17: ローディング・エラー改善

### フェーズ2（3週間目安）
1. Issue #2: 自動ポイント計算
2. Issue #4: チェックイン機能
3. Issue #9: 通知機能
4. Issue #10: チーム戦作成UI
5. Issue #11: チーム戦エントリーUI
6. Issue #14: パスワードリセット

### フェーズ3（4週間目安）
1. Issue #12: チーム戦ブラケット表示
2. Issue #13: チーム戦結果入力
3. Issue #15: プロフィール編集充実
4. Issue #16: チームアバター
5. Issue #18: レスポンシブ改善

### フェーズ4（Phase 2機能）
- Issue #19〜#26 は優先度に応じて順次実装

---

## 関連ドキュメント

- [要件定義](./requirements.md)
- [画面設計](./screen-design.md)
- [データベース設計](./database-design.md)
- [技術スタック](./tech-stack.md)
